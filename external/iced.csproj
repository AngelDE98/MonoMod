<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <EnableDefaultItems>false</EnableDefaultItems>

    <MMReferenceBackports>true</MMReferenceBackports>
    <MMSharedSourceFiles>false</MMSharedSourceFiles>
    <MMReferenceILHelpers>true</MMReferenceILHelpers>
    <MMIncludeUnsafeAlias>true</MMIncludeUnsafeAlias>
    <MMReferenceUtils>false</MMReferenceUtils>
    <MMMethodImplAlias>true</MMMethodImplAlias>
    <MMUseSourceGen>false</MMUseSourceGen>
      
    <_MMTargetFrameworks>$(TargetFrameworks)</_MMTargetFrameworks>
    <_MMDefineConsts>$(DefineConstants)</_MMDefineConsts>
    <RealProjDir>$(MSBuildThisFileDirectory)iced\src\csharp\Intel\Iced\</RealProjDir>
  </PropertyGroup>

  <ItemGroup>
    <Compile Include="$(RealProjDir)**/*$(DefaultLanguageSourceExtension)" 
             Exclude="$(RealProjDir)$(DefaultItemExcludes);$(RealProjDir)$(DefaultExcludesInProjectFolder)"
             Condition=" '$(EnableDefaultCompileItems)' == 'true' " />
    <EmbeddedResource Include="$(RealProjDir)**/*.resx"
                      Exclude="$(RealProjDir)$(DefaultItemExcludes);$(RealProjDir)$(DefaultExcludesInProjectFolder)"
                      Condition=" '$(EnableDefaultEmbeddedResourceItems)' == 'true' " />
  </ItemGroup>
  
  <ItemGroup Condition="'$(EnableDefaultNoneItems)' == 'true' ">
    <None Include="$(RealProjDir)**/*"
          Exclude="$(RealProjDir)$(DefaultItemExcludes);$(DefaultExcludesInProjectFolder)" />
    <None Remove="$(RealProjDir)**/*$(DefaultLanguageSourceExtension)" />
    <None Remove="$(RealProjDir)**/*.resx" />
  </ItemGroup>

  <Import Project="$(MSBuildThisFileDirectory)iced\src\csharp\Directory.Build.props" />
  <Import Project="$(MSBuildThisFileDirectory)iced\src\csharp\Intel\Iced\Iced.csproj" />

  <ItemGroup>
    <None Remove="..\..\..\..\LICENSE.txt" />
    <None Remove="..\..\..\..\logo.png" />
  </ItemGroup>

  <ItemGroup>
    <PackageFile Remove="$(MMRootPath)icon.png" />
    <PackageFile Include="$(MSBuildThisFileDirectory)iced\logo.png" PackagePath="%(Filename)%(Extension)" />
    <PackageFile Include="$(MSBuildThisFileDirectory)iced\LICENSE.txt" PackagePath="%(Filename)%(Extension)" />
  </ItemGroup>
  
  <PropertyGroup>
    <PackageIcon>logo.png</PackageIcon>
    
    <TargetFrameworks>$(_MMTargetFrameworks)</TargetFrameworks>
    <IcedFeatureFlags>DECODER;ENCODER;BLOCK_ENCODER</IcedFeatureFlags>
    <DefineConstants>$(_MMDefineConsts);$(IcedFeatureFlags);HAS_SPAN</DefineConstants>
  </PropertyGroup>

</Project>
